(function(){var t;new(t=function(){function t(){var t;this.banner=document.getElementById("banner"),this.header=document.getElementById("header"),this.initRenderer(),null!=this.gl&&(this.initShaders(),this.initQuad(),this.resize(),this.animating=null!=(t=document.body.classList)?t.contains("front"):void 0,this.random=Math.random(),this.timeOffset=-250,window.addEventListener("resize",function(t){return function(i){return t.resize(i)}}(this)),window.addEventListener("orientationchange",function(t){return function(i){return t.resize(i)}}(this)),header.addEventListener("click",function(t){return function(i){return t.toggleAnimation(i)}}(this)),this.render())}return t.prototype.initRenderer=function(){var t;return this.canvas=document.createElement("canvas"),this.banner.appendChild(this.canvas),this.gl=null!=(t=this.canvas.getContext("webgl"))?t:this.canvas.getContext("experimental-webgl")},t.prototype.initShaders=function(){var t,i;return i=this.gl.createShader(this.gl.VERTEX_SHADER),this.gl.shaderSource(i,"attribute vec2 position;\nvoid main(){gl_Position=vec4(position,0,1);}"),this.gl.compileShader(i),t=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.shaderSource(t,"precision lowp float;uniform float time;uniform vec2 resolution;vec3 a(vec3 b){vec4 c=vec4(1.,2./3.,1./3.,3.);vec3 d=abs(fract(b.xxx+c.xyz)*6.-c.www);return b.z*mix(c.xxx,clamp(d-c.xxx,.0,1.),b.y);}vec3 e(float f){return vec3(.02,.5,.4)+vec3(.8,.3,.1)*cos(6.28319*(vec3(1.,2.,4.)*f+vec3(.8,.4,.65)));}void main(void){vec2 g=((gl_FragCoord.xy-resolution*.5)/min(resolution.x,resolution.y))*20.;float h=.0;float i=(7.295+.0001*time)*6.28319;float j=cos(i);float k=sin(i);vec2 l=vec2(j,-k);vec2 m=vec2(k,j);vec2 n=vec2(0,1.618);float o=3.521+.0001*time;for(int p=0;p<120;p++){float q=dot(g,g);if(q>1.){q=1./q;g*=q;}h*=.99;h+=q;g=vec2(dot(g,l),dot(g,m))*o+n;}gl_FragColor=vec4(e(fract(.01*time+h)),1.);}"),this.gl.compileShader(t),this.shader=this.gl.createProgram(),this.gl.attachShader(this.shader,i),this.gl.attachShader(this.shader,t),this.gl.linkProgram(this.shader),this.gl.useProgram(this.shader),this.positionAttrib=this.gl.getAttribLocation(this.shader,"position"),this.gl.enableVertexAttribArray(this.positionAttrib),this.timeUniform=this.gl.getUniformLocation(this.shader,"time"),this.gl.uniform1f(this.timeUniform,0),this.resolutionUniform=this.gl.getUniformLocation(this.shader,"resolution"),this.gl.uniform2f(this.resolutionUniform,this.width,this.height)},t.prototype.initQuad=function(){var t,i;return t=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),i=[-1,-1,1,-1,-1,1,1,1],this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(i),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.vertexPosAttrib,2,this.gl.FLOAT,!1,0,0)},t.prototype.resize=function(t){var i;return this.devicePixelRatio=null!=(i=window.devicePixelRatio)?i:1,this.width=this.banner.offsetWidth*this.devicePixelRatio,this.height=this.banner.offsetHeight*this.devicePixelRatio,this.canvas.style.width=this.banner.offsetWidth+"px",this.canvas.style.height=this.banner.offsetHeight+"px",this.canvas.width=this.width,this.canvas.height=this.height,this.gl.uniform2f(this.resolutionUniform,this.width,this.height),this.gl.viewport(0,0,this.width,this.height)},t.prototype.toggleAnimation=function(){return this.animating=!this.animating,this.animating?(null==this.lastAnimated&&(this.lastAnimated=0),this.timeOffset+=this.lastAnimated-this.timestamp,this.render()):this.lastAnimated=this.timestamp},t.prototype.render=function(t){return null==t&&(t=0),this.timestamp=t/1e3,(this.animating||0===this.timestamp)&&(this.gl.uniform1f(this.timeUniform,this.timestamp+this.timeOffset+50*(1-2*this.random)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)),requestAnimationFrame(function(t){return function(i){return t.render(i)}}(this))},t}())}).call(this);
